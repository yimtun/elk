pipeline 聚合分析

针对聚合分析的结果再次进行聚合分析 而且支持链式调用 可以回答如下问题

- 订单月平均销售额是多少

把一年每一个月的销售额拿到 
把每个月的销售额加起来 除以12
就得到了月平均销售额


es 中知道每一个订单的销售额

先按月 将订单分桶

分桶之后做一个指标分析  一个sum  将price 做一个加和  得到每个月订单的总金额


在使用 avg_bucket 这个pipeline聚合分析的类型  对price 的bucket  做一个平均值

所有的pipeline 都会有 bucket_path 这个关键词 指点pipeline
分析哪一个上面聚合分析的结果












pipeline 聚合分析 分类

pipeline 的分析结果会输出到原结果中 根据输出位置的不同 分为以下两类

Parent 结果内嵌到现有的聚合分析结果 中
  




